## 项目自动化介绍
```
本章涵盖：
* 理解项目自动化的好处
* 了解不同类型的项目自动化
* 考察构建工具的特性和架构
* 搜索构建工具实现的优点和缺点
```
### 项目自动化的好处
能够以一种可重复、可持续的方式构建和交付软件是关键。
* 防止手动介入
* 创建可重复的构建
* 让构建便携

### 项目自动化的类型
1. 按需构建
  按需构建的典型用例就是用户在自己的机器上触发构建。
2. 触发构建
  这种类型的自动化通常是在向版本控制系统中提交代码时触发。
3. 预定构建
  预定构建是一种基于时间的程序调度方案。

### 构建工具
以可执行和有序的任务来表达自动化需求。

##### 构建工具的剖析
理解构建工具中组件的交互、构建逻辑的实际定义，以及输入和输出的数据是非常重要的。
* 构建文件
  构建文件包含了构建所需的配置信息、定义外部依赖，例如第三方类库，还包含了以任务形式实现某个特殊目的的指令和它们的相互依赖关系。
* 构建的输入和输出
* 构建引擎
  构建引擎会在运行时处理构建文件，解析任务之间的依赖，设置好执行所需要的全部配置。一旦内部模型建立好了，引擎就会按照正确的顺序去执行一系列任务。
* 依赖管理器
  依赖管理器用于处理你在build文件中声明的依赖定义，从工件仓库(例如，本地文件系统、一个FTP或者HTTP服务器)中解析它们，并使它们对项目可用。

### Java构建工具
两个流行的基于Java的构建工具：Ant和Maven。
##### Apache Ant
<p>Apache Ant是一个用java编写的开源构建工具。其主要目的是在Java项目中为常用任务提供自动化，例如编译源代码、运行单元测试、打包JAR文件和生成Javadoc文档。</p>
<p>虽然Ant的核心是用Java编写的，但是build文件是通过XML表示的，这样就可以在任何运行时环境下使用了。Ant不提供依赖管理器，所以你需要自己管理外部依赖。然而，Ant可以和另一个Apache项目Ivy很好地集成，它是一个完善且独立的依赖管理器。要集成Ant和Ivy需要一些额外的工作，而且要为每个独立的项目手动配置。</p>
<p>一个构建脚本由三个基本元素组成：一个project、多个target和可用的task。</p>

**缺点**<br/>
* 使用XML作为构建逻辑的定义语言相比于其他更简明的定义语言，会导致构建脚本过于臃肿和啰嗦。
* 复杂的构建逻辑会导致又长又难以维护的构建脚本。当尝试用标记语言去定义类似if-then/if-then-else的逻辑语句时，它完全就成了一个负担。
* Ant没有提供任何指导来告诉你如何建设项目。在一个企业级配置中，这常常会导致一个build文件每一次看上去都不一样。常用功能时常被到处拷贝。项目中每一个新的开发人员都需要去理解构建中每一个独立的部分。
* 你想要指导在构建中有多少个类被编译或者多少个task被执行。Ant没有暴露任何的API能够让你在运行时获取内存模型中的信息。
* 在没有Ivy的情况下，使用Ant很难管理依赖。在通常情况下，你需要将JAR文件提交到版本控制系统中，并且手动管理组织结构。

##### Apache Maven
Maven团队认识到标准化项目布局和统一构建生命周期的必要性。Maven选择约定优于配置的思想，这意味着它为你的项目配置和行为提供了有意义的默认值。maven的核心功能可以通过开发定制的插件来扩展。
1. 标准的目录布局
  ![image.png](https://upload-images.jianshu.io/upload_images/5361549-db9fed713648a9c1.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)
2. 构建生命周期
  Maven基于构建生命周期的思想。每个项目都确切知道有哪些步骤去执行构建、打包和发布应用程序，包括如下功能：
  * 编译源代码
  * 运行单元测试和集成测试
  * 组装工件(例如，JAR文件)
  * 将工件部署到本地仓库
  * 将工件发布到远程仓库

**缺点**<br/>
* Maven推荐一个默认的结构和生命周期，常常会太过限制，也许不适合你的项目需求。
* Maven写定制的扩展过于累赘。
* Maven的早期版本(低于2.0.9)会自动尝试更新它们自己的核心插件，例如，将单元测试的支持插件升级到最新版本。这可能会导致脆弱和不稳定的构建。
